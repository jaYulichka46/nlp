# Lab 2: Cleaning & Normalization Pipeline

## 1. Яка задача і що у text полі
**Задача:** Класифікація текстів (Task A - Text Classification).
**Поле `text`:** Містить сирі тексти українських новин з датасету `NewsClassificationDataset`. Тексти включають заголовки, основний зміст новин, часто перевантажені специфічною типографікою, посиланнями на першоджерела, email-адресами прес-служб та вступними шаблонами інформагентств.

## 2. Як запустити ноутбук в Colab
1. Відкрийте файл `notebooks/lab2_cleaning_normalization.ipynb` у Google Colab.
2. Натисніть **Runtime** -> **Run All**. 
*(Ноутбук автоматично схилить цей репозиторій, встановить необхідні залежності з `requirements.txt`, завантажить датасет та виконає весь пайплайн зверху донизу).*

## 3. Правила очистки та нормалізації
* **Виправлення кодування:** Застосовано бібліотеку `ftfy` для автоматичного лікування "кракозябрів" та HTML-артефактів (наприклад, `&nbsp;`).
* **Нормалізація типографіки:** Уніфіковано різні види лапок (« », „ “) до стандартних `""`, тире (—, –) до дефіса `-`, та всі види апострофів до єдиного стандарту `'`.
* **Маскування PII:** Електронні пошти замінено на тег `<EMAIL>`, а веб-посилання — на `<URL>`, щоб уникнути перенавчання моделі на конкретних адресах.
* **Очищення новинного сміття:** Видалено вступні локації інформагентств на початку тексту (шаблон типу `(Київ) - `).
* **Детермінований Sentence Splitter:** Реалізовано розбиття на речення за допомогою регулярних виразів, яке "захищає" українські скорочення та ініціали від хибних розривів.

## 4. 5 найболючіших edge cases у датасеті
1. **Географічні та загальні скорочення:** (м. Київ, вул. Хрещатик, 2024 р.) — звичайний спліттер розриває речення на крапці після скорочення.
2. **Ініціали осіб:** (В.О. Зеленський, Т.Г. Шевченко) — крапки в ініціалах сприймаються як кінець речення.
3. **Міста в дужках на початку:** Багато новин починаються з `(Місто) - текст новини`, що не є частиною семантики самого тексту і потребує видалення.
4. **Складні версії та числа:** (Python 3.10, ріст на 15.5%) — крапка всередині чисел не повинна ділити речення навпіл.
5. **Зоопарк типографіки:** Суміш українських, англійських лапок та різних апострофів в одному тексті, що для моделі виглядає як абсолютно різні токени.

## 5. Що стало краще “після”
* **Ідемпотентність:** Пайплайн стабільно працює без ефекту "empty explosions" (відсоток порожніх текстів після обробки не змінився і становить ~0.0%).
* **Уніфікація:** Успішно розбито понад 120 000 новин на масиви речень із збереженням цілісності українських скорочень.
* **Анонімізація:** Замасковано тисячі унікальних URL та Email-адрес, що суттєво зменшило розмір словника (vocabulary size) для майбутньої моделі класифікації та прибрало зайвий шум.